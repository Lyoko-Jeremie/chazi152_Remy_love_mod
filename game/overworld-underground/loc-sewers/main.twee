:: Industrial Drain

<<set $outside to 0>><<set $location to "drain">><<effects>><<set $bus to "industrialdrain">><<wPersist>><<getTarget true>>
你正待在工业区下方的下水道内.
<<if $weather is "rain">>
	水在中间的水道上流动着，几乎淹没了两侧的细长走道。
<<elseif $weather is "snow">>
	水夹杂着大量的冰从中间的水道流过.
<<else>>
	水在中间的水道处流着，在两侧各有一条细长的走道。
<</if>>
<<wHunt "drain">>
<br><br>
你可以从这里进入城镇的几个地方。
<br><br>
<<if isPubfameTaskAccepted("morgan")>>
	米奇说USB在下水道的某个地方，那家伙认为<<if $sewersintro is 1>>那玩意在摩根手里.<<else>>一定在某个住在下水道的怪人手里.，你注意到附近有个向下的梯子.<</if>>
	<br><br>
<</if>>
<<if $stress gte $stressmax and !$possessed>>
	<<passoutdrain>>
<<else>>
	<<rng>>
	<<if ($weather is "rain" or $weather is "snow") and $rng gte 75 and $eventskip is 0>>
		<<eventsdrain>>
	<<elseif ($rng gte 92 or $eventforced) and $eventskip is 0>>
		<<eventsdrain>>
	<<else>>
		<<if $arousal gte $arousalmax>>
			<<orgasmLocation "sewers">>
		<</if>>
		<<if $sewersintro is 1>>
			<<laddericon>><<link [[爬下去|Sewers Industrial]]>><<set $eventskip to 1>><<sewersstart>><</link>>
			<br><br>
		<<elseif $historytrait gte 1 or isPubfameTaskAccepted("morgan")>>
			<<laddericon>><<link [[检查下行的梯子|Drain Ladder]]>><</link>>
			<br><br>
		<</if>>
		<<ind>><<commercialdrain>>
		<br>
		<<ind>><<drainexit>>
		<br>
		<<if $exposed gte 1 and Time.dayState isnot "night">>
		<<else>>
			<<elk>>
			<<mer>>
			<<harvest>>
		<</if>>
		<br>
		<<industrial>>
	<</if>>
	<<displayLinks>>
<</if>>
<<set $eventskip to 0>>

:: Commercial Drain

<<set $outside to 0>><<set $location to "drain">><<effects>><<set $bus to "commercialdrain">><<wPersist>><<getTarget true>>
你正待在商业区下方的下水道内.
<<if $weather is "rain">>
	水在中间的水道上流动着，几乎淹没了两侧的细长走道。
<<elseif $weather is "snow">>
	水夹杂着大量的冰从中间的水道流过.
<<else>>
	水在中间的水道处流着，在两侧各有一条细长的走道。
<</if>>
<<wHunt "drain">>
<br><br>
你可以从这里进入城镇的几个地方。
<br><br>
<<if isPubfameTaskAccepted("morgan")>>
	米奇说USB在下水道的某个地方，那家伙认为<<if $sewersintro is 1>>那玩意在摩根手里.<<else>>一定在某个住在下水道的怪人手里.，你注意到附近有个向下的梯子.<</if>>
	<br><br>
<</if>>
<<if $stress gte $stressmax and !$possessed>>
	<<passoutdrain>>
<<else>>
	<<rng>>
	<<if ($weather is "rain" or $weather is "snow") and $rng gte 75 and $eventskip is 0>>
		<<eventsdrain>>
	<<elseif ($rng gte 92 or $eventforced) and $eventskip is 0>>
		<<eventsdrain>>
	<<else>>
		<<if $arousal gte $arousalmax>>
			<<orgasmLocation "sewers">>
		<</if>>
		<<if $sewersintro is 1>>
			<<laddericon>><<link [[爬下去|Sewers Commercial]]>><<sewersstart>><<set $eventskip to 1>><</link>>
			<br><br>
		<<elseif $historytrait gte 1 or isPubfameTaskAccepted("morgan")>>
			<<laddericon>><<link [[检查下行的梯子|Drain Ladder]]>><</link>>
			<br><br>
		<</if>>
		<<ind>><<residentialdrain>>
		<br>
		<<ind>><<industrialdrain>>
		<<if $exposed gte 1 and Time.dayState isnot "night">>
		<<else>>
			<<high>>
			<<connudatus>>
			<<cliff>>
			<<nightingale>>
			<<starfish>>
			<<oxford>>
		<</if>>
		<br>
		<<commercial>>
		<<park>>
		<br>
		<<if $historytrait gte 2 and $schooldrainintro gte 1>>
			<<schoolbuildingicon>><<link [[通往学校的秘密通道(0:02)|School Toilets]]>><<pass 2>><</link>>
			<br>
		<</if>>
	<</if>>
	<<displayLinks>>
<</if>>
<<set $eventskip to 0>>

:: Residential Drain

<<set $outside to 0>><<set $location to "drain">><<effects>><<set $bus to "residentialdrain">><<wPersist>><<getTarget true>>
你正待在住宅区下方的下水道内.
<<if $weather is "rain">>
	水在中间的水道上流动着，几乎淹没了两侧的细长走道。
<<elseif $weather is "snow">>
	水夹杂着大量的冰从中间的水道流过.
<<else>>
	水在中间的水道处流着，在两侧各有一条细长的走道。
<</if>>
<<wHunt "drain">>
<br><br>
你可以从这里进入城镇的几个地方。
<br><br>
<<if isPubfameTaskAccepted("morgan")>>
	米奇说USB在下水道的某个地方，那家伙认为<<if $sewersintro is 1>>那玩意在摩根手里.<<else>>一定在某个住在下水道的怪人手里.，你注意到附近有个向下的梯子.<</if>>
	<br><br>
<</if>>
<<if $stress gte $stressmax and !$possessed>>
	<<passoutdrain>>
<<else>>
	<<rng>>
	<<if ($weather is "rain" or $weather is "snow") and $rng gte 75 and $eventskip is 0>>
		<<eventsdrain>>
	<<elseif ($rng gte 92 or $eventforced) and $eventskip is 0>>
		<<eventsdrain>>
	<<else>>
		<<if $arousal gte $arousalmax>>
			<<orgasmLocation "sewers">>
		<</if>>
		<<if $sewersintro is 1>>
			<<laddericon>><<link [[爬下去|Sewers Residential]]>><<sewersstart>><<set $eventskip to 1>><</link>>
			<br><br>
		<<elseif $historytrait gte 1 or isPubfameTaskAccepted("morgan")>>
			<<laddericon>><<link [[检查下行的梯子|Drain Ladder]]>><</link>>
			<br><br>
		<</if>>
		<<ind>><<commercialdrain>>
		<br>
		<<if $exposed gte 1 and Time.dayState isnot "night">>
		<<else>>
			<<domus>>
			<<barb>>
			<<danube>>
			<<wolf>>
		<</if>>
		<br>
		<<residential>>
	<</if>>
	<<displayLinks>>
<</if>>
<<set $eventskip to 0>>

:: Passout Drain
<<if isPlayerNonparasitePregnancyEnding()>>
	<<pregnancyWatersBrokenPassout "drain">>
<<else>>
	你把自己逼得太紧了。
	<br><br>
	<<passout>>
	<<beastNEWinit 4 lizard>>
	<<set $danger to random(1, 10000)>>
	<<if $danger gte (9900 - $allure)>>
		<<if $rng gte 51 and ($monster is 1 or $bestialitydisable is "f")>><!-- Modified for Beast People -->
			<<link [[睁开眼睛|Passout Beast Drain]]>><<set $molestationstart to 1>><</link>>
		<<elseif $rng gte 1>>
			<<link [[睁开眼睛|Passout Drain Abduction]]>><<endevent>><<set $molestationstart to 1>><</link>>
		<</if>>
	<<else>>
		<<ambulance>>
	<</if>>
	<<pass 1 hour>>
	<<trauma 6>><<set $stress -= 2000>>
<</if>>

:: Passout Beast Drain

<<if $molestationstart is 1>>
	<<set $molestationstart to 0>>
	<<controlloss>>
	<<violence 1>>
	<<neutral 1>>
	<<molested>>
	<<beastCombatInit>>
	<<beastTrainGenerate>>
	你被嘶嘶的声音惊醒，四只<<beastsplural>>就在你脑袋旁边矗立着!
<</if>>
<<effects>>
<<effectsman>>
<<alarmstate>>
<<beast $enemyno>>
<br><br>
<<stateman>>
<br><br>
<<actionsman>>
<<if $alarm is 1>>
	<<if $rescue is 0>>
		<<set $alarm to 0>>
		<br><br>
		<<if $enemyarousal gte $enemyarousalmax>>
			<span id="next"><<link [[继续|Passout Beast Drain Ejaculation]]>><</link>></span><<nexttext>>
		<<elseif $enemyhealth lte 0>>
			<span id="next"><<link [[继续->Passout Beast Drain Escape]]>><</link>></span><<nexttext>>
		<<else>>
			<span id="next"><<link [[继续|Passout Beast Drain]]>><</link>></span><<nexttext>>
		<</if>>
	<</if>>
<<elseif $enemyarousal gte $enemyarousalmax>>
	<span id="next"><<link [[继续->Passout Beast Drain Ejaculation]]>><</link>></span><<nexttext>>
<<elseif $enemyhealth lte 0>>
	<span id="next"><<link [[继续->Passout Beast Drain Escape]]>><</link>></span><<nexttext>>
<<else>>
	<span id="next"><<link [[继续->Passout Beast Drain]]>><</link>></span><<nexttext>>
<</if>>

:: Passout Beast Drain Ejaculation

<<effects>>
<<beastejaculation>>
<<if $combatTrain.length gt 0>>
	这只<<beasttype>>在满足之后便离开了，但另外一只正跃跃欲试.
	<<combatTrainAdvance>>
	<br><br>
	<<link [[继续|Passout Beast Drain]]>><</link>>
<<else>>
	心满意足的<<beasttype>>离开了。
	<<combatTrainAdvance>>
	<br><br>
	<<link [[继续|Passout Beast Drain End]]>><</link>>
<</if>>

:: Passout Beast Drain Escape

<<effects>>
<<beastwound>>
<<if $combatTrain.length gt 0>>
	这只<<beasttype>>吃痛退开，但另一个家伙正跃跃欲试。
	<<combatTrainAdvance>>
	<br><br>
	<<link [[继续|Passout Beast Drain]]>><</link>>
<<else>>
	这只<<beasttype>>吃痛退开.
	<<combatTrainAdvance>>
	<br><br>
	<<link [[继续|Passout Beast Drain End]]>><</link>>
<</if>>

:: Passout Beast Drain End

<<effects>>
<<if $enemywounded is 1 and $enemyejaculated is 0>>
	这只<<beasttype>>在发出嘶嘶的警告声后，便飞快的逃进了黑暗之中.
<<elseif $enemywounded is 0 and $enemyejaculated is 1>>
	那只<<beasttype>>离开了，就这样留你一个人躺在水泥地上。
<<elseif $enemywounded gte 2 and $enemyejaculated is 0>>
	这只<<beastsplural>>觉得你所带来的麻烦远超于你的价值，于是它便转身遁入黑暗之中。
<<elseif $enemywounded is 0 and $enemyejaculated gte 2>>
	这些<<beastsplural>>离你而去，在黑暗中孤身一人的你因为这些家伙而止不住的颤抖.
<<elseif $enemywounded gte 1 and $enemyejaculated gte 1>>
	这些<<beastsplural>>离你而去，徒留你一人在黑暗中瑟瑟发抖，不过其中的一个在离开时貌似有些一瘸一拐.
<</if>>
<br><br>
<<tearful>>你振作起来。
<br><br>
<<clotheson>>
<<endcombat>>
<<set $stress -= 1000>>
<<destinationeventend>>

:: Storm Drain Entrance

<<set $outside to 1>><<effects>>
你从井盖处往下看，它通向小镇下面的暴雨排水管道。
<<if $weather is "rain">>
	你听到了洪流的声音。
<</if>>
<br><br>
<<switch $bus>>
<<case "nightingale">>
	<<commercialdrainquick>>
<<case "domus">>
	<<residentialdrainquick>>
<<case "elk">>
	<<industrialdrainquick>>
<<case "high">>
	<<commercialdrainquick>>
<<case "starfish">>
	<<commercialdrainquick>>
<<case "barb">>
	<<residentialdrainquick>>
<<case "connudatus">>
	<<commercialdrainquick>>
<<case "wolf">>
	<<residentialdrainquick>>
<<case "harvest">>
	<<industrialdrainquick>>
<<case "oxford">>
	<<commercialdrainquick>>
<<case "danube">>
	<<residentialdrainquick>>
<<case "mer">>
	<<industrialdrainquick>>
<<case "cliff">>
	<<commercialdrainquick>>
<<case "industrial">>
	<<industrialdrainquick>>
<<case "residential">>
	<<residentialdrainquick>>
<<case "commercial">>
	<<commercialdrainquick>>
<<case "park">>
	<<commercialdrainquick>>
<</switch>>
<br>
<<destination>>

:: Drain Exit

<<set $outside to 0>><<set $location to "drain">><<effects>><<set $bus to "drainexit">><<wPersist>><<getTarget true>>
你正待在下水道出海口，就在那些雨水最终流向大海的地方。
<<if $weather is "rain">>
	水在中间的水道处流着，两侧的走道上正往外喷水.
<<else>>
	水在中间的水道处流着，在两侧各有一条细长的走道。
<</if>>
<<wHunt "drain">>
<br><br>
<<if $stress gte $stressmax and !$possessed>>
	<<passoutdrain>>
<<else>>
	<<rng>>
	<<if ($weather is "rain" or $weather is "snow") and $rng gte 75 and $eventskip is 0>>
		<<eventsdrain>>
	<<elseif ($rng gte 92 or $eventforced) and $eventskip is 0>>
		<<eventsdrain>>
	<<else>>
		<<if $scienceproject is "ongoing" and $sciencelichendrain is 0>>
			<<link [[检查地衣|Drain Lichen]]>><<set $sciencelichendrain to 1>><</link>>
			<br>
		<</if>>
		<<industrialdrain>>
		<br><br>
	<</if>>
<</if>>

<<set $eventskip to 0>>

:: Passout Drain Abduction

<<if $molestationstart is 1>>
	<<set $molestationstart to 0>>
	<<controlloss>>
	<<violence 1>>
	<<neutral 1>>
	<<molested>>
	<<generate1>><<generate2>><<maninit>>
	<<npcClothesType $NPCList[0] "worker">><<npcClothesType $NPCList[1] "worker">>
	<<set $leftarm to "bound">><<set $rightarm to "bound">><<upperruined>><<lowerruined>><<underruined>>
	你在一个没有窗户的房间里醒来。一根绳子缠在你的腰上，将你的手臂绑在背后并把你吊在天花板上。那<<fullGroup>>坐在你的面前。"<<pShe>>醒了。"那个<<person>>走到你身后，在你的后背上狠狠地抽了一下。"我们可以保留我们在工作中发现的任何东西，所以我们就大发善心帮帮你了，不要试图反抗。"
	<br><br>
<</if>>
<<effects>>
<<effectsman>><<man>>
<<stateman>>
<br><br>
<<actionsman>>
<<if $enemyarousal lt $enemyarousalmax and $enemyhealth gt 0>>
	<span id="next"><<link [[继续|Passout Drain Abduction]]>><</link>></span><<nexttext>>
<<else>>
	<span id="next"><<link [[继续|Passout Drain Abduction Finish]]>><</link>></span><<nexttext>>
<</if>>

:: Passout Drain Abduction Finish

<<if $enemyhealth lte 0>>
	<<set $stress -= 1000>>
	<<effects>>
	你把那个<<fullGroup>>从你身边推开，在那些家伙缓过来，你挣脱绳子逃出了房间。<<tearful>>你跑上一段楼梯，在经过一道门后发现自己来到了外面.
	<br><br>
	<<endcombat>>
	<<industrialeventend>>
<<elseif $enemyarousal gte $enemyarousalmax>>
	<<ejaculation>>
	<<clotheson>>
	<<if $enemyanger gte 1>>
		那个<<person1>><<person>>开始把你从天花板上解下来，而那个<<person2>><<person>>打开了你正下方的一个舱门，在绳子解开之后，被迫跳入那冰冷的水中。
		<br><br>
		<<endcombat>>
		<<link [[继续|Drain Water]]>><<set $bus to "industrialdrain">><</link>>
	<<else>>
		在玩够了之后，那两个家伙把你从天花板上解下来，然后把你一把推到了外面。"祝你好运！" 在说完之后，那扇门便被关上了。
		<br><br>
		<<tearful>>你振作起来。
		<br><br>
		<<endcombat>>
		<<industrialeventend>>
	<</if>>
<</if>>
<<set $stress -= 1000>>

:: Drain Water

<<set $outside to 0>><<set $location to "drain">><<effects>><<water>><<wPersist>>
你在下水道中，正被<<if $weather is "rain">>猛烈的<<else>>水流<</if>>依托着前行。
<br><br>
<<if $unbindattempt is 1>><<set $unbindattempt to 0>>
	<<if $rng gte 51>>
		<<unbind>>你试图在隧道的侧面削弱你的束缚。它们变得松动，你设法解开了手臂的束缚！
		<br><br>
	<<else>>
		你试图通过两侧的走道来解除你的束缚，但并没有成功。
		<br><br>
	<</if>>
<</if>>
<<if $stress gte $stressmax>>
	你不能再忍受了。你昏了过去。
	<br><br>
	<<link [[继续|Drain Water Passout]]>><</link>>
<<else>>
	<<set $danger to random(1, 10000)>>
	<<if $danger gte (9900 - $allure) and $eventskip isnot 1>>
		<<rng>>
		<<if $rng gte 75 and $slimedisable is "f" and $hallucinations gte 2>>
			水开始在你周围凝结。
			<br><br>
			<<link [[继续|Drain Water Slime]]>><<set $molestationstart to 1>><</link>>
			<br>
		<<elseif $rng gte 51 and $swarmdisable is "f">>
			一群鳗鱼向你移动。
			<br><br>
			<<link [[继续|Drain Water Eels]]>><<set $molestationstart to 1>><</link>>
		<<elseif $rng gte 26 and $worn.upper.exposed gte 2 and $parasite.nipples.name is undefined and $parasitedisable is "f">>
			你试图游向人行道，但你的<<nipples>>被一种刺痛感打断了。两只奇怪的软体动物附着在你身上，吸吮着，仿佛在尝试哺乳。当你碰到它们时，它们更紧地抓住了你，引发出羞耻的感觉。你需要外部的帮助才能摆脱它们。
			<<parasite nipples urchin>><<garousal>><<arousal 600 "breasts">>
			<br><br>
			<<link [[继续|Drain Water]]>>
				<<if $bus is "residentialdrain">>
					<<set $bus to "commercialdrain">>
				<<elseif $bus is "commercialdrain">>
					<<set $bus to "industrialdrain">>
				<<elseif $bus is "industrialdrain">>
					<<set $bus to "drainexit">>
				<</if>>
			<</link>>
			<br>
		<<elseif $rng gte 10>><!-- Modified for Beast People -->
			<<beastNEWinit 1 lizard>>
			<<if $monster is 1 or $bestialitydisable is "f">>
				水中的影子向你移动。
				<br><br>
				<<link [[继续|Drain Water Lizard]]>><<set $molestationstart to 1>><</link>>
				<br>
			<<else>>
				水中的影子向你移动。你向它泼水，然后设法把它吓跑，不管它是什么。<<gtrauma>><<gstress>><<trauma 6>><<stress 6>>
				<br><br>

				<<link [[继续|Drain Water]]>><<endevent>><</link>>
				<br>
			<</if>>
		<<else>>
			你试图游到人行道上，但水太急了。
			<<if $bus is "drainexit">>
				你被带到户外，然后被丢进了下面的大海。
				<br><br>
				<<link [[继续|Sea Cliffs]]>><<set $worn.over_upper.integrity -= 20>><<set $worn.over_lower.integrity -= 20>><<set $worn.upper.integrity -= 20>><<set $worn.lower.integrity -= 20>><<set $worn.under_lower.integrity -= 20>><</link>>
			<<else>>
				它让你沿着排水系统流得很远。
				<br><br>
				<<link [[继续|Drain Water]]>><</link>>
				<br>
			<</if>>
			<<if $bus is "residentialdrain">>
				<<set $bus to "commercialdrain">>
			<<elseif $bus is "commercialdrain">>
				<<set $bus to "industrialdrain">>
			<<elseif $bus is "industrialdrain">>
				<<set $bus to "drainexit">>
			<</if>>
		<</if>>
	<<else>>
		<<if $leftarm is "bound" and $rightarm is "bound">>
			你挣扎着待在水面上。
			<<if $bus isnot "drainexit">>
				<br><br>
				<<link [[解放你的手臂|Drain Water]]>>
					<<if $bus is "residentialdrain">>
						<<set $bus to "commercialdrain">>
					<<elseif $bus is "commercialdrain">>
						<<set $bus to "industrialdrain">>
					<<elseif $bus is "industrialdrain">>
						<<set $bus to "drainexit">>
					<</if>>
					<<set $unbindattempt to 1>>
				<</link>>
			<<else>>
				水流带着你向排水管的尽头流去。你试图用被束缚的手臂紧紧抓住边缘，但是毫无用处。你被带离了水流，然后坠入了下面的海洋中。
				<br><br>
				<<link [[继续|Sea Cliffs]]>><<set $worn.over_upper.integrity -= 20>><<set $worn.over_lower.integrity -= 20>><<set $worn.upper.integrity -= 20>><<set $worn.lower.integrity -= 20>><<set $worn.under_lower.integrity -= 20>><</link>>
			<</if>>
		<<else>>
			你紧紧抓住隧道的边缘，把自己拖到安全的地方。
			<br><br>
			<<if $bus is "residentialdrain">>
				<<residentialdraineventend>>
				<br>
			<<elseif $bus is "commercialdrain">>
				<<commercialdraineventend>>
				<br>
			<<elseif $bus is "industrialdrain">>
				<<industrialdraineventend>>
				<br>
			<<elseif $bus is "drainexit">>
				<<drainexiteventend>>
				<br>
			<</if>>
		<</if>>
	<</if>>
<</if>>
<<set $eventskip to 0>>

:: Drain Water Eels

<<set $outside to 0>><<set $location to "drain">><<effects>>
<<if $molestationstart is 1>>
	<<set $molestationstart to 0>>
	<<molested>>
	<<controlloss>>
	<<set $combat to 1>>
	<<set $enemytype to "swarm">>
	<<swarminit "eels" "鱼群" "向你移动" "包围着你" "击退" 1 9>>
	<<if $bus is "residentialdrain">>
		<<set $timer to 40>>
	<<elseif $bus is "commercialdrain">>
		<<set $timer to 30>>
	<<elseif $bus is "industrialdrain">>
		<<set $timer to 20>>
	<<else>>
		<<set $timer to 10>>
	<</if>>
	<<set $water to 1>>
	<<set $swimdistance to 8>>
<</if>>
<<if $bus is "drainexit">>
	你看到了前面下水道的出口。如果你不尽快到达安全的地方，你就会被带到海里去!
	<br><br>
<</if>>
<<swarmeffects>>
<<set $swimdistance += 1>><<if $swimdistance gte 20>><<set $swimdistance to 20>><</if>>
水让你沿着隧道流得很远。
<<if $swimdistancecheck is $swimdistance>>
	你逆流而上，但水流太猛，无法前进。你需要使用双臂。
<<elseif $swimdistancecheck gt $swimdistance>>
	你与水流抗争，向安全的地方靠近。
<<elseif $swimdistancecheck lt $swimdistance>>
	你被带的离安全地带越来越远。
<</if>>
<<if $swimdistance gte 15>>
	你被拖离了人行道。
<<elseif $swimdistance gte 10>>
	人行道离你有一段距离。
<<elseif $swimdistance gte 5>>
	人行道很近。
<<elseif $swimdistance gte 2>>
	人行道几乎触手可及。
<<else>>
	<span class="teal">人行道触手可及!</span>
<</if>>
<<set $swimdistancecheck to $swimdistance>>
<br><br>
<<swarm>>
<<swarmactions>>
<<if $stress gte $stressmax>>
	<span id="next"><<link [[继续|Drain Water Eels Finish]]>><</link>></span><<nexttext>>
<<elseif $timer lte 0>>
	<span id="next"><<link [[继续|Drain Water Eels Finish]]>><</link>></span><<nexttext>>
<<elseif $swimdistance lte 1>>
	<span id="next"><<link [[继续|Drain Water Eels Finish]]>><</link>></span><<nexttext>>
<<else>>
	<span id="next"><<link [[继续|Drain Water Eels]]>><</link>></span><<nexttext>>
<</if>>

:: Drain Water Lizard

<<if $molestationstart is 1>>
	<<set $molestationstart to 0>>
	<<controlloss>>
	<<violence 1>>
	<<neutral 1>>
	<<molested>>
	<<beastCombatInit>>
	一只巨大的<<beasttype>>从水里冒了出来!
	<<if $bus is "residentialdrain">>
		<<set $timer to 40>>
	<<elseif $bus is "commercialdrain">>
		<<set $timer to 30>>
	<<elseif $bus is "industrialdrain">>
		<<set $timer to 20>>
	<<else>>
		<<set $timer to 10>>
	<</if>>
<</if>>
<<if $bus is "drainexit">>
	你看到了前面下水道的出口。
	<br><br>
<</if>>
<<effects>>
<<effectsman>>
<br><br>
<<beast $enemyno>>
<br><br>
<<stateman>>
<br><br>
<<actionsman>>
<<if _combatend or $timer lte 0>>
	<span id="next"><<link [[继续|Drain Water Lizard Finish]]>><</link>></span><<nexttext>>
<<else>>
	<span id="next"><<link [[继续|Drain Water Lizard]]>><</link>></span><<nexttext>>
<</if>>

:: Drain Water Eels Finish

<<effects>>
<<if $swimdistance lte 1>>
	<<tearful>>你从水流里爬了出来，把蜂群甩在身后。鳗鱼从你身上蠕动着逃离露天环境。
	<br><br>
	<<if $timer gte 30>>
		<<set $bus to "residentialdrain">>
	<<elseif $timer gte 20>>
		<<set $bus to "commercialdrain">>
	<<elseif $timer gte 10>>
		<<set $bus to "industrialdrain">>
	<<else>>
		<<set $bus to "drainexit">>
	<</if>>
	<<clotheson>>
	<<endcombat>>
	<<destinationeventend>>
<<elseif $timer lte 0>>
	水把你带到排水管的尽头。你试图抓住隧道的一边，但无济于事。你被带到户外，然后坠入了下面的大海。<<tearful>>你挣扎着浮出水面。
	<br><br>
	<<if $upperoff isnot 0>>
		<<upperruined>>
	<</if>>
	<<if $loweroff isnot 0>>
		<<lowerruined>>
	<</if>>
	<<if $underloweroff isnot 0>>
		<<underlowerruined>>
	<</if>>
	<<if $underupperoff isnot 0>>
		<<underupperruined>>
	<</if>>
	<<clotheson>>
	<<endcombat>>
	<<seacliffseventend>>
<<else>>
	你再也承受不住了。你昏倒了。
	<br><br>
	<<if $upperoff isnot 0>>
		<<upperruined>>
	<</if>>
	<<if $loweroff isnot 0>>
		<<lowerruined>>
	<</if>>
	<<if $underloweroff isnot 0>>
		<<underlowerruined>>
	<</if>>
	<<if $underupperoff isnot 0>>
		<<underupperruined>>
	<</if>>
	<<endcombat>>
	<<link [[继续|Drain Water Passout]]>><<pass 1 hour>><</link>>
<</if>>

:: Drain Water Passout

<<effects>>
<<if isPlayerNonparasitePregnancyEnding()>>
	<<pregnancyWatersBrokenPassout "drain">>
<<else>>
	<<passout>>
	你失去知觉的身体沿着排水沟移动，直到你掉进海里。你被电击醒了。
	<br><br>
	<<link [[继续|Sea Cliffs]]>><</link>>
	<<set $stress -= 2000>><<trauma 6>>
<</if>>

:: Drain Water Lizard Finish

<<effects>>
<<if $timer gte 30>>
	<<set $bus to "residentialdrain">>
<<elseif $timer gte 20>>
	<<set $bus to "commercialdrain">>
<<elseif $timer gte 10>>
	<<set $bus to "industrialdrain">>
<<else>>
	<<set $bus to "drainexit">>
<</if>>
<<if $timer lte 0>>
	水把你带到排水管的尽头。你试图抓住隧道的一边，但无济于事。你被带到户外，然后坠入了下面的大海。<<tearful>>你挣扎着浮出水面。
	<br><br>
	<<if $upperoff isnot 0>>
		<<upperruined>>
	<</if>>
	<<if $loweroff isnot 0>>
		<<lowerruined>>
	<</if>>
	<<if $underloweroff isnot 0>>
		<<underlowerruined>>
	<</if>>
	<<if $underupperoff isnot 0>>
		<<underupperruined>>
	<</if>>
	<<clotheson>>
	<<endcombat>>
	<<seacliffseventend>>
<<elseif $enemyarousal gte $enemyarousalmax>>
	<<beastejaculation>>
	满足后，<<beasttype>>对你失去了兴趣。
	<br><br>
	<<tearful>>你振作起来。
	<br><br>
	<<clotheson>>
	<<endcombat>>
	<<link [[继续|Drain Water]]>><<set $eventskip to 1>><</link>>
<<else>>
	<<bHe>>呜咽着逃进了黑暗中。
	<br><br>
	<<tearful>>你振作起来。
	<br><br>
	<<clotheson>>
	<<endcombat>>
	<<link [[继续|Drain Water]]>><<set $eventskip to 1>><</link>>
<</if>>

:: Drain Water Slime

<<set $outside to 0>><<set $location to "drain">><<effects>>

<<if $molestationstart is 1>>
	<<set $molestationstart to 0>>
	<<molested>>
	<<controlloss>>
	<<set $combat to 1>>
	<<set $enemytype to "swarm">>
	<<swarminit "slimes" "史莱姆群" "向你移动" "包围着你" "击退" 1 10>>
	<<if $bus is "residentialdrain">>
		<<set $timer to 40>>
	<<elseif $bus is "commercialdrain">>
		<<set $timer to 30>>
	<<elseif $bus is "industrialdrain">>
		<<set $timer to 20>>
	<<else>>
		<<set $timer to 10>>
	<</if>>
	<<set $water to 1>>
	<<set $swimdistance to 10>>
<</if>>
<<if $bus is "drainexit">>
	你看到了前面下水道的出口。如果你不尽快到达安全的地方，你就会被带到海里去!
	<br><br>
<</if>>
<<swarmeffects>>
<<set $swimdistance += 1>>
<<if $swimdistance gte 20>><<set $swimdistance to 20>><</if>>
水让你沿着隧道流得很远。
<<if $swimdistancecheck is $swimdistance>>
	你逆流而上，但水流太猛，无法前进。你需要使用双臂。
<<elseif $swimdistancecheck gt $swimdistance>>
	你与水流抗争，向安全的地方靠近。
<<elseif $swimdistancecheck lt $swimdistance>>
	你被带的离安全地带越来越远。
<</if>>
<<if $swimdistance gte 15>>
	你被拖离了人行道。
<<elseif $swimdistance gte 10>>
	人行道离你有一段距离。
<<elseif $swimdistance gte 5>>
	人行道很近。
<<elseif $swimdistance gte 2>>
	人行道几乎触手可及。
<<else>>
	<span class="teal">人行道触手可及!</span>
<</if>>
<<set $swimdistancecheck to $swimdistance>>
<br><br>
<<swarm>>
<<swarmactions>>
<<if $stress gte $stressmax>>
	<span id="next"><<link [[继续|Drain Water Slime Finish]]>><</link>></span><<nexttext>>
<<elseif $timer lte 0>>
	<span id="next"><<link [[继续|Drain Water Slime Finish]]>><</link>></span><<nexttext>>
<<elseif $swimdistance lte 1>>
	<span id="next"><<link [[继续|Drain Water Slime Finish]]>><</link>></span><<nexttext>>
<<else>>
	<span id="next"><<link [[继续|Drain Water Slime]]>><</link>></span><<nexttext>>
<</if>>

:: Drain Water Slime Finish

<<effects>>
<<if $swimdistance lte 1>>
	<<tearful>>你从水流里爬了出来，把史莱姆甩在身后。
	<br><br>
	<<if $timer gte 30>>
		<<set $bus to "residentialdrain">>
	<<elseif $timer gte 20>>
		<<set $bus to "commercialdrain">>
	<<elseif $timer gte 10>>
		<<set $bus to "industrialdrain">>
	<<else>>
		<<set $bus to "drainexit">>
	<</if>>
	<<clotheson>>
	<<endcombat>>
	<<destinationeventend>>
<<elseif $timer lte 0>>
	水把你带到排水管的尽头。你试图抓住隧道的一边，但无济于事。你被带到户外，然后坠入了下面的大海。<<tearful>>你挣扎着浮出水面。
	<br><br>
	<<if $upperoff isnot 0>>
		<<upperruined>>
	<</if>>
	<<if $loweroff isnot 0>>
		<<lowerruined>>
	<</if>>
	<<if $underloweroff isnot 0>>
		<<underlowerruined>>
	<</if>>
	<<if $underupperoff isnot 0>>
		<<underupperruined>>
	<</if>>
	<<clotheson>>
	<<endcombat>>
	<<seacliffseventend>>
<<else>>
	你再也承受不住了。你昏倒了。
	<br><br>
	<<if $upperoff isnot 0>>
		<<upperruined>>
	<</if>>
	<<if $loweroff isnot 0>>
		<<lowerruined>>
	<</if>>
	<<if $underloweroff isnot 0>>
		<<underlowerruined>>
	<</if>>
	<<if $underupperoff isnot 0>>
		<<underupperruined>>
	<</if>>
	<<endcombat>>
	<<link [[继续|Drain Water Passout]]>><<pass 1 hour>><</link>>
<</if>>

:: Drain Tentacles

<<set $outside to 0>><<set $location to "drain">>
<<if $molestationstart is 1>>
	<<set $molestationstart to 0>>
	<<set $combat to 1>>
	<<set $enemytype to "tentacles">>
	<<molested>>
	<<controlloss>>
	<<tentaclestart 8 15>>
	<<set $timer to 30>>
<</if>>
<<effects>>
<<effectstentacles>>
<<tentacles>>
<<statetentacles>>
<<actionstentacles>>
<<if $tentacles.active lte ($tentacles.max / 2)>>
	<span id="next"><<link [[继续|Drain Tentacles Finish]]>><</link>></span><<nexttext>>
<<elseif $timer lte 1>>
	<span id="next"><<link [[继续|Drain Tentacles Finish]]>><</link>></span><<nexttext>>
<<else>>
	<span id="next"><<link [[继续|Drain Tentacles]]>><</link>></span><<nexttext>>
<</if>>

:: Drain Tentacles Finish

<<effects>>
<<if $tentacles.active lte ($tentacles.max / 2)>>
	这个生物对你失去了兴趣，回到了深处。<<tearful>>你挣扎着站起来。
	<<clotheson>>
	<<endcombat>>
	<<destinationeventend>>
<<else>>
	你脚下的走道在压力下塌陷，你跌入下面的水中。
	<br><br>
	<<if $upperoff isnot 0>>
		<<upperruined>>
	<</if>>
	<<if $loweroff isnot 0>>
		<<lowerruined>>
	<</if>>
	<<if $underloweroff isnot 0>>
		<<underlowerruined>>
	<</if>>
	<<if $underupperoff isnot 0>>
		<<underupperruined>>
	<</if>>
	<<clotheson>>
	<<endcombat>>
	<<link [[继续|Drain Water]]>><</link>>
	<br>
<</if>>

:: Drain Lichen

<<set $outside to 0>><<set $location to "drain">><<effects>><<set $bus to "drainexit">>
墙上覆盖着一层紫色的地衣。你剥掉一些。<span class="gold">你可以把它添加到你房间或学校图书馆的科学项目中。</span>
<br><br>
<<link [[继续|Drain Exit]]>><</link>>
<br>

:: Drain Ladder

<<effects>><<set $location to "sewers">>
<<if $historytrait gte 1>>
	你听说过雨水渠下面的旧下水道。它们已经有一个多世纪没有被使用过了，据说很危险。还有着关于怪物和宝藏的传言。
<<else>>
	你还记得关于雨水渠下面的旧下水道的谣言。下面有宝藏和怪物。你不确定这条传言的真假，但无论如何要保持警惕。
<</if>>

<br><br>
<<link [[下去|Sewers Descend]]>><</link>>
<br>
<<if $bus is "residentialdrain">>
	<<link [[离开|Residential Drain]]>><</link>>
	<br>
<<elseif $bus is "commercialdrain">>
	<<link [[离开|Commercial Drain]]>><</link>>
	<br>
<<else>>
	<<link [[离开|Industrial Drain]]>><</link>>
	<br>
<</if>>

:: Drain Struggle
<<effects>>

<<if $struggle_start is 1>>
	<<struggle_init>>
	<<set $struggle.creature to "slime">>
	<<struggle_creatures 1 1>>
	<<set $combat to 1>>
	<<controlloss>>
	<<violence 1>>
	<<molested>>
	<<if $phase is 1>>
		<<set $struggle.anus.creature to "slime">><<set $anususe to "struggle">><<set $anusstate to "struggle">><<set $struggle.enemy[0].location to "anus">>
	<<elseif $player.penisExist>>
		<<set $struggle.penis.creature to "slime">><<set $penisuse to "struggle">><<set $penisstate to "struggle">><<set $struggle.enemy[0].location to "penis">>
	<<else>>
		<<set $struggle.vagina.creature to "slime">><<set $vaginause to "struggle">><<set $vaginastate to "struggle">><<set $struggle.enemy[0].location to "vagina">>
	<</if>>
	<<unset $struggle_start>>
<</if>>


<<struggle>>


<<if $struggle.done gte $struggle.number>>
	<span id="next"><<link [[继续|Drain Struggle End]]>><</link>></span>
	<br>
<<else>>
	<span id="next"><<link [[继续|Drain Struggle]]>><</link>></span>
	<br>
<</if>>


:: Drain Struggle End
<<effects>>

史莱姆在运河中跳跃，消失在水下。
<br><br>

<<clotheson>>
<<endcombat>>

<<set $eventskip to 1>>
<<destinationstormdrain>>

:: Drain Slime Physique
<<effects>>

<<if $physiqueSuccess>>
	你把手伸过肩膀，把手指伸进史莱姆温暖的团块里，然后拉。它很抗拒，用更大的力量粘在你身上，<span class="green">你把它全部剥掉了。</span>这力道使它飞过走道，溅到墙上，消失在另一个排水沟里。
	<br><br>
	<<destinationstormdrain>>
<<else>>
	你把手伸过肩膀，把手指伸进史莱姆温暖的团块里，然后拉。它很抗拒，用更大的力量粘在你身上，<span class="red">并缠住你的手。</span>
	<br><br>

	当你挣扎的时候，史莱姆覆盖了你的背部，
	<<if !$worn.upper.type.includes("naked")>>
		<span class="pink">伴随着嘶嘶声，你的<<print $worn.upper.cn_name_cap>>被融化了。</span>
		<<set $worn.upper.integrity -= 1000>>
		<<integritycheck>>
		<<exposure>>
		<br><br>
	<<elseif !$worn.under_upper.type.includes("naked")>>
		<span class="pink">伴随着嘶嘶声，你的<<print $worn.under_upper.cn_name_cap>>被融化了。</span>.
		<<set $worn.under_upper.integrity -= 1000>>
		<<integritycheck>>
		<<exposure>>
		<br><br>
	<<else>>
		你的皮肤很痒。<<garousal>><<arousal 600>>
		<br><br>
	<</if>>

	<<link [[把它扯下来|Drain Slime Physique 2]]>><</link>><<physiquedifficulty 1 30000>>
	<br>
	<<link [[等待机会|Drain Slime Watch]]>><<arousal 1800>><</link>><<ggarousal>>
	<br>
	<<if !$worn.under_upper.type.includes("naked")>>
		<<link [[牺牲你的上衣|Drain Slime Sacrifice Under]]>><</link>>
		<br>
	<</if>>
<</if>>


:: Drain Slime Physique 2
<<effects>>

<<if $physiqueSuccess>>
	你用另一只手抓住史莱姆,并再次尝试。这一次<span class="green">你成功把它从你的身体上撕了下来。</span>这力道使它飞过水面，撞到了墙上，史莱姆逃进了排水沟里。
	<br><br>

	<<destinationstormdrain>>
<<else>>
	你用另一只手抓住史莱姆,并再次尝试。<span class="red">它又一次缠住了你，让你的手臂无力反抗.</span>它进一步在你的身体上蔓延，
	<<if !$worn.under_upper.type.includes("naked")>>
		伴随着嘶嘶声，你的<<print $worn.under_upper.cn_name_cap>>被融化了。
		<<set $worn.under_upper.integrity -= 1000>>
		<<integritycheck>>
		<<exposure>>
	<<else>>
		你的皮肤很痒。<<garousal>><<arousal 600>>
	<</if>>
	当它爬到你的<<bottom>>时，它紧贴着附近的墙壁以获得支撑力，将你压倒在地。
	<br><br>

	<<link [[继续|Drain Struggle]]>><<set $phase to 1>><<set $struggle_start to 1>><</link>>
	<br>
<</if>>

:: Drain Slime Watch
<<effects>>

你静静地看着，史莱姆覆盖了你的整个背部，
<<if !$worn.upper.type.includes("naked")>>
	<span class="pink">伴随着嘶嘶声，你的<<print $worn.upper.cn_name_cap>>被融化了。</span>
	<<set $worn.upper.integrity -= 1000>>
	<<integritycheck>>
	<<exposure>>
<<elseif !$worn.under_upper.type.includes("naked")>>
	<span class="pink">伴随着嘶嘶声，你的<<print $worn.under_upper.cn_name_cap>>被融化了。</span>.
	<<set $worn.under_upper.integrity -= 1000>>
	<<integritycheck>>
	<<exposure>>
<<else>>
	它使你的皮肤发痒。<<ggarousal>><<arousal 600>>
	<br>
<</if>>
<br>
你会注意到一个规律。它每次蔓延扩散的时候都会跳跃，都会压扁自己。
<br><br>
<<if $arousal gte 10000>>
	你在等待时机，但一种温暖的感觉传遍了你的皮肤。<<orgasm>>
	<br><br>

	你的膝盖一弯，然后瘫倒在地。史莱姆抓住了你的破绽。
	<br><br>

	<<link [[继续|Drain Struggle]]>><<set $phase to 1>><<set $struggle_start to 1>><</link>>
	<br>
<<else>>
	你等待时机，在它脆弱的时候抓住它，把它扔过水道。它啪的一声撞在远处的墙上，最后消失在了一个排水沟里。
	<br><br>

	<<destinationstormdrain>>
<</if>>

:: Drain Slime Sacrifice Upper
<<effects>>

你撕下你身上的<<print $worn.upper.cn_name_cap>>和史莱姆。你逃跑时，地上的布料在嘶嘶声中溶解了。
<br><br>

<<set $worn.upper.integrity -= 1000>>
<<integritycheck>>
<<exposure>>

<<destinationstormdrain>>

:: Drain Slime Sacrifice Under
<<effects>>

你撕下你身上的<<print $worn.under_upper.cn_name_cap>>和史莱姆。你逃跑时，地上的布料在嘶嘶声中溶解了。
<br><br>

<<set $worn.under_upper.integrity -= 1000>>
<<integritycheck>>
<<exposure>>

<<destinationstormdrain>>
